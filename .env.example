# Headscale Kubernetes Deployment Configuration
# Copy this file to .env and fill in your values

# ========================================
# Headscale Configuration
# ========================================

# Your domain for accessing Headscale
# Example: headscale.example.com
HEADSCALE_DOMAIN=headscale.example.com

# Kubernetes namespace to deploy to
NAMESPACE=headscale

# Storage configuration
STORAGE_CLASS=longhorn
STORAGE_SIZE=1Gi

# Timezone
TZ=Asia/Tokyo

# ========================================
# Cloudflare Configuration
# ========================================
#
# This deployment uses API Token for automatic tunnel setup.
# The system will:
# 1. Verify your API token
# 2. Create a Cloudflare tunnel automatically
# 3. Generate tunnel credentials
# 4. Configure cloudflared to use the tunnel
# 5. Ensure DNS is configured via the Cloudflare API
#
# How to get CLOUDFLARE_API_TOKEN:
#
# 1. Go to https://dash.cloudflare.com/profile/api-tokens
# 2. Click "Create Token"
# 3. Use the "Edit Cloudflare Tunnels" template
# 4. Ensure these permissions are checked:
#    - Account > Cloudflare Tunnel > Edit
#    - Account > Cloudflare Tunnel > Read
#    - Account > Account Settings > Read
#    - Zone > DNS > Edit (needed for automatic DNS management)
# 5. Set Account Resources to "All accounts"
# 6. Create the token and copy it
#
# How to get CLOUDFLARE_ACCOUNT_ID (optional but recommended):
#
# 1. Go to https://dash.cloudflare.com/
# 2. Look at the left sidebar - your Account ID is there (32 characters)
# 3. You can also get it via API with your token:
#    curl -H "Authorization: Bearer <TOKEN>" \
#    https://api.cloudflare.com/client/v4/accounts | jq '.result[0].id'
#
# Example values:
# CLOUDFLARE_API_TOKEN=v1.0_abc123def456abc123def456abc123de...
# CLOUDFLARE_ACCOUNT_ID=abc123def456abc123def456abc123de

CLOUDFLARE_API_TOKEN=your_api_token_here
# Leave empty to auto-discover (recommended)
CLOUDFLARE_ACCOUNT_ID=

# Optional: override if automatic zone lookup fails. Leave empty to auto-discover.
CLOUDFLARE_ZONE_ID=

# Optional: customize tunnel resource name (default: headscale-k8s-tunnel)
CLOUDFLARE_TUNNEL_NAME=headscale-k8s-tunnel